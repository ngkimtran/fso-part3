(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){'use strict';n.r(t);var c=n(17),r=n.n(c),a=n(8),o=n(3),s=n(1),i=n(4),u=n.n(i),l='/api/persons',d=function(){return u.a.get(l).then((function(e){return e.data}))},j=function(e){return u.a.post(l,e).then((function(e){return e.data}))},b=function(e,t){return u.a.put(''.concat(l,'/').concat(e),t).then((function(e){return e.data}))},h=function(e){return u.a.delete(''.concat(l,'/').concat(e))},f=n(0),O=function(e){var t=e.newName,n=e.newNumber,c=e.handleNameChange,r=e.handleNumberChange,a=e.handleAdd;return Object(f.jsx)('form',{onSubmit:a,children:Object(f.jsx)('table',{style:{textAlign:'left'},children:Object(f.jsxs)('tbody',{children:[Object(f.jsxs)('tr',{children:[Object(f.jsx)('th',{children:'name:'}),Object(f.jsx)('td',{children:Object(f.jsx)('input',{type:'text',onChange:c,value:t})})]}),Object(f.jsxs)('tr',{children:[Object(f.jsx)('th',{children:'number:'}),Object(f.jsx)('td',{children:Object(f.jsx)('input',{type:'tel',onChange:r,value:n})})]}),Object(f.jsx)('tr',{children:Object(f.jsx)('td',{children:Object(f.jsx)('button',{type:'submit',children:'add'})})})]})})})},m=function(e){var t=e.persons,n=e.handleDelete;return Object(f.jsx)('table',{children:Object(f.jsx)('tbody',{children:t.map((function(e){return Object(f.jsxs)('tr',{children:[Object(f.jsx)('td',{children:e.name}),Object(f.jsx)('td',{children:e.number}),Object(f.jsx)('td',{children:Object(f.jsx)('button',{onClick:function(){var t,c;t=e.id,c=e.name,window.confirm('Delete '.concat(c,'?'))&&n(t)},children:'delete'})})]},e.id)}))})})},x=function(e){var t=e.searchParam,n=e.handleSearch;return Object(f.jsxs)('div',{children:[Object(f.jsx)('p',{children:'filter shown with'}),Object(f.jsx)('input',{type:'text',onChange:n,value:t})]})},p=function(e){var t=e.message,n=e.messageClass;return null===t?null:Object(f.jsx)('div',{className:n,children:t})},g=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(''),i=Object(o.a)(r,2),u=i[0],l=i[1],g=Object(s.useState)(''),w=Object(o.a)(g,2),v=w[0],C=w[1],N=Object(s.useState)(''),y=Object(o.a)(N,2),S=y[0],k=y[1],L=Object(s.useState)(null),A=Object(o.a)(L,2),D=A[0],T=A[1],P=Object(s.useState)(null),E=Object(o.a)(P,2),J=E[0],B=E[1],I=n.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));Object(s.useEffect)((function(){d().then((function(e){c(e)})).catch((function(e){console.log(e)}))}),[]);var U=function(e){if(window.confirm(''.concat(e,' is already added to phonebook, replace old number with a new one?'))){var t=n.find((function(t){return t.name.toLowerCase()===e.trim().toLowerCase()})),r=Object(a.a)(Object(a.a)({},t),{},{number:v});b(t.id,r).then((function(e){c(n.map((function(n){return n.id!==t.id?n:e}))),T('Updated '.concat(t.name,' phone number to ').concat(v)),setTimeout((function(){T(null)}),5e3)})).catch((function(e){console.log(e),B(e.response.data.error),setTimeout((function(){B(null)}),5e3)}))}};return Object(f.jsxs)('div',{children:[Object(f.jsx)('h2',{children:'Phonebook'}),Object(f.jsx)(p,{message:D,messageClass:'notification'}),Object(f.jsx)(p,{message:J,messageClass:'error'}),Object(f.jsx)(x,{searchParam:S,handleSearch:function(e){k(e.target.value)}}),Object(f.jsx)('h3',{children:'Add a new'}),Object(f.jsx)(O,{newName:u,newNumber:v,handleNameChange:function(e){l(e.target.value)},handleNumberChange:function(e){C(e.target.value)},handleAdd:function(e){e.preventDefault();var t={name:u,number:v};n.some((function(e){return e.name.toLowerCase()===u.trim().toLowerCase()}))?U(u):j(t).then((function(e){c(n.concat(e)),T('Added '.concat(u)),setTimeout((function(){T(null)}),5e3)})).catch((function(e){console.log(e),B(e.response.data.error),setTimeout((function(){B(null)}),5e3)})),l(''),C('')}}),Object(f.jsx)('h3',{children:'Numbers'}),Object(f.jsx)(m,{persons:S.length>0?I:n,handleDelete:function(e){h(e).then(c(n.filter((function(t){return t.id!==e})))).catch((function(e){console.error(e)}))}})]})};n(41);r.a.render(Object(f.jsx)(g,{}),document.getElementById('root'))}},[[42,1,2]]])
//# sourceMappingURL=main.cb2074d2.chunk.js.map